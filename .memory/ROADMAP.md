---
id: roadmap
updated: 2026-01-09
---

# Roadmap — провайдеры (KISS)

## Цели
- Облегчить добавление новых провайдеров (Gemini 3.0 Flash, GPT‑5) без усложнения архитектуры.
- Сохранить текущий sync‑ингест и минимальную сложность поддержки.

## Обязательный минимум
1. Внутренний стандарт драйвера (чек‑лист):
   - вход: ingest‑файл + prompt + template_media (inline‑image),
   - выход: `ProviderResult(payload, content_type)`,
   - ошибки: только `ProviderTimeoutError` / `ProviderExecutionError`,
   - ретраи: как в GeminiDriver (retry_policy + NO_IMAGE), зафиксировать в спеках для всех драйверов.
2. Внутренние JSON‑схемы `slot.settings` для каждого провайдера:
   - общий минимум: `model`, `prompt`, `output.mime_type`, `template_media[]`,
   - провайдер‑специфичные поля поверх минимума.
3. Минимальный маппинг ошибок:
   - `provider_timeout` (SLA окно),
   - `provider_error` (остальные случаи).
4. Базовые unit‑тесты драйверов:
   - успех, timeout, provider_error, invalid_response.

## Логирование (KISS, без проброса контекста)
1. Логирование остаётся распределённым:
   - драйверы пишут подробные логи провайдера,
   - ingest пишет итоговый статус (success/timeout/provider_error).
2. В спеках зафиксировать ответственность и минимальный объём полей для логов.

## Что сознательно не делаем
- Capability matrix.
- Публичные контракты провайдера.
- Сложные ретраи/backoff‑политики.
- Реестр провайдеров с валидацией ключей на старте.
- Расширенная метрика с высокой кардинальностью.
