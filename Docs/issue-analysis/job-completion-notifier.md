# Анализ Issue: JobCompletionNotifier для Ingest API

## Контекст
- **Issue:** Ingest API ожидает финализации Job, но отсутствует механизм, который пробуждает ожидающий HTTP-поток; остаётся только активный polling по БД. Предлагается добавить явный JobCompletionNotifier (например, на Postgres LISTEN/NOTIFY или внутрипроцессном брокере).
- **Затронутые артефакты спецификации:** use-case UC2/UC3 (взаимодействие ingest ↔ воркер), OpenAPI `POST /ingest/{slotId}`, доменная модель `Job`.

## Выдержки из спецификаций
- UC2 описывает последовательность, где Ingest API создаёт Job, затем "ожидает результат" и после обновления воркером отдаёт ответ, но не конкретизирует канал уведомления между воркером и HTTP-запросом.【F:spec/docs/blueprints/use-cases.md†L24-L43】
- UC3 фиксирует, что API должно завершить ожидание по `T_sync_response` и воркер получает сигнал отмены, однако способ передачи сигнала и уведомления о финализации также не определён.【F:spec/docs/blueprints/use-cases.md†L57-L71】
- OpenAPI контракт для `POST /ingest/{slotId}` закрепляет дедлайн ожидания и факт завершения задачи, но не описывает инфраструктурный канал пробуждения HTTP-потока или обратное уведомление от воркера.【F:spec/contracts/openapi.yaml†L710-L741】
- Доменная модель `Job` фиксирует поля статусов и метаданные результата, но не упоминает события/нотификаторы для доставки статуса в Ingest API.【F:spec/docs/blueprints/domain-model.md†L23-L52】

## Вывод
Спецификации подтверждают необходимость синхронного ожидания в пределах `T_sync_response`, но не содержат явного описания механизма уведомления Ingest API о финализации Job. Следовательно, Issue выявляет пробел: без JobCompletionNotifier реализация будет вынуждена активно опрашивать БД, что противоречит цели избежать избыточной нагрузки и риска пропустить финализацию. Issue актуален и требует дополнения спецификаций механизмом уведомления (например, Postgres LISTEN/NOTIFY или внутренний брокер событий).
