{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "GPT Image 1.5 Slot Settings",
  "type": "object",
  "required": ["model", "prompt"],
  "additionalProperties": false,
  "properties": {
    "model": {
      "type": "string",
      "description": "GPT Image model identifier",
      "default": "gpt-image-1.5"
    },
    "prompt": {
      "type": "string",
      "description": "Text instruction passed to GPT Image API"
    },
    "output": {
      "type": "object",
      "description": "Controls response format and size",
      "additionalProperties": false,
      "properties": {
        "format": {
          "type": "string",
          "enum": ["png", "jpeg", "webp"],
          "default": "png"
        },
        "compression": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "default": 100
        },
        "size": {
          "type": "string",
          "description": "Target image size (e.g. 1024x1024) or auto"
        }
      }
    },
    "retry_policy": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "max_attempts": {
          "type": "integer",
          "minimum": 1,
          "maximum": 3,
          "default": 1
        },
        "backoff_seconds": {
          "type": "number",
          "minimum": 0,
          "maximum": 10,
          "default": 2.0
        }
      }
    },
    "template_media": {
      "type": "array",
      "description": "Optional list of reference images to include in request",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["role"],
        "properties": {
          "role": {
            "type": "string",
            "description": "Human readable name used in driver logs/prompts"
          },
          "media_kind": {
            "type": "string",
            "description": "Slot template media kind to resolve media_object_id dynamically"
          },
          "media_object_id": {
            "type": "string",
            "description": "Explicit media object identifier"
          },
          "optional": {
            "type": "boolean",
            "default": false,
            "description": "Allow driver to continue if the reference is missing"
          }
        },
        "anyOf": [
          { "required": ["media_kind"] },
          { "required": ["media_object_id"] }
        ]
      }
    }
  }
}
