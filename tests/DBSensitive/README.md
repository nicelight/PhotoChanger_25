# DBSensitive Test Suite

Этот каталог содержит тесты, которые потенциально разрушают структуру боевой
базы данных (например, выполняют `DROP TABLE` или `alembic downgrade`).

> [!WARNING]
> Начиная с версии, в которой появилась эта директория, все сценарии,
> помеченные маркером `db_sensitive`, **исключены из дефолтного запуска**
> `pytest`. Чтобы выполнить только эту группу, явно укажите маркер:
>
> ```bash
> pytest -m db_sensitive
> ```
>
> Если вам действительно необходимо использовать боевые креденшелы, выставьте
> `PYTEST_ALLOW_PRODUCTION_DSN=1` и задайте нужный DSN через
> `PHOTOCHANGER_DATABASE_URL`. По умолчанию фикстуры подключаются к локальной
> базе `photochanger_test` и автоматически отказываются использовать боевой DSN.

Запускайте эти тесты в изолированном окружении и только после того, как
убедитесь, что в базе есть актуальный бэкап или реплика для восстановления.
